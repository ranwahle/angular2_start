System.registerModule("../../../../../../../node_modules/rx/src/core/linq/observable/delaywithselector.js", [], function() {
  "use strict";
  var __moduleName = "../../../../../../../node_modules/rx/src/core/linq/observable/delaywithselector.js";
  observableProto.delayWithSelector = function(subscriptionDelay, delayDurationSelector) {
    var source = this,
        subDelay,
        selector;
    if (typeof subscriptionDelay === 'function') {
      selector = subscriptionDelay;
    } else {
      subDelay = subscriptionDelay;
      selector = delayDurationSelector;
    }
    return new AnonymousObservable(function(observer) {
      var delays = new CompositeDisposable(),
          atEnd = false,
          done = function() {
            if (atEnd && delays.length === 0) {
              observer.onCompleted();
            }
          },
          subscription = new SerialDisposable(),
          start = function() {
            subscription.setDisposable(source.subscribe(function(x) {
              var delay;
              try {
                delay = selector(x);
              } catch (error) {
                observer.onError(error);
                return;
              }
              var d = new SingleAssignmentDisposable();
              delays.add(d);
              d.setDisposable(delay.subscribe(function() {
                observer.onNext(x);
                delays.remove(d);
                done();
              }, observer.onError.bind(observer), function() {
                observer.onNext(x);
                delays.remove(d);
                done();
              }));
            }, observer.onError.bind(observer), function() {
              atEnd = true;
              subscription.dispose();
              done();
            }));
          };
      if (!subDelay) {
        start();
      } else {
        subscription.setDisposable(subDelay.subscribe(start, observer.onError.bind(observer), start));
      }
      return new CompositeDisposable(subscription, delays);
    }, this);
  };
  return {};
});
System.get("../../../../../../../node_modules/rx/src/core/linq/observable/delaywithselector.js" + '');
