System.registerModule("../../../../../node_modules/weinre/web/client/GoToLineDialog.js", [], function() {
  "use strict";
  var __moduleName = "../../../../../node_modules/weinre/web/client/GoToLineDialog.js";
  WebInspector.GoToLineDialog = function(view) {
    this._element = document.createElement("div");
    this._element.className = "go-to-line-dialog";
    this._element.addEventListener("keydown", this._onKeyDown.bind(this), false);
    this._closeKeys = [WebInspector.KeyboardShortcut.Keys.Enter.code, WebInspector.KeyboardShortcut.Keys.Esc.code];
    var dialogWindow = this._element;
    dialogWindow.createChild("label").innerText = WebInspector.UIString("Go to line: ");
    this._input = dialogWindow.createChild("input");
    this._input.setAttribute("type", "text");
    this._input.setAttribute("size", 6);
    var linesCount = view.textModel.linesCount;
    if (linesCount)
      this._input.setAttribute("title", WebInspector.UIString("1 - %d", linesCount));
    var blurHandler = this._onBlur.bind(this);
    this._input.addEventListener("blur", blurHandler, false);
    var go = dialogWindow.createChild("button");
    go.innerText = WebInspector.UIString("Go");
    go.addEventListener("click", this._onClick.bind(this), false);
    go.addEventListener("mousedown", function(e) {
      this._input.removeEventListener("blur", blurHandler, false);
    }.bind(this), false);
    this._view = view;
    view.element.appendChild(this._element);
    this._previousFocusElement = WebInspector.currentFocusElement;
    WebInspector.currentFocusElement = this._input;
    this._input.select();
  };
  WebInspector.GoToLineDialog.show = function(sourceView) {
    if (this._instance)
      return;
    this._instance = new WebInspector.GoToLineDialog(sourceView);
  };
  WebInspector.GoToLineDialog.prototype = {
    _hide: function() {
      if (this._isHiding)
        return;
      this._isHiding = true;
      WebInspector.currentFocusElement = this._previousFocusElement;
      WebInspector.GoToLineDialog._instance = null;
      this._element.parentElement.removeChild(this._element);
    },
    _onBlur: function(event) {
      this._hide();
    },
    _onKeyDown: function(event) {
      if (event.keyCode === WebInspector.KeyboardShortcut.Keys.Tab.code) {
        event.preventDefault();
        return;
      }
      if (event.keyCode === WebInspector.KeyboardShortcut.Keys.Enter.code)
        this._highlightSelectedLine();
      if (this._closeKeys.indexOf(event.keyCode) >= 0) {
        this._hide();
        event.stopPropagation();
      }
    },
    _onClick: function(event) {
      this._highlightSelectedLine();
      this._hide();
    },
    _highlightSelectedLine: function() {
      var value = this._input.value;
      var lineNumber = parseInt(value, 10);
      if (!isNaN(lineNumber) && lineNumber > 0) {
        lineNumber = Math.min(lineNumber, this._view.textModel.linesCount);
        this._view.highlightLine(lineNumber);
      }
    }
  };
  return {};
});
System.get("../../../../../node_modules/weinre/web/client/GoToLineDialog.js" + '');
