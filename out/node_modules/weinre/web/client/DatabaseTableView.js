System.registerModule("../../../../../node_modules/weinre/web/client/DatabaseTableView.js", [], function() {
  "use strict";
  var __moduleName = "../../../../../node_modules/weinre/web/client/DatabaseTableView.js";
  WebInspector.DatabaseTableView = function(database, tableName) {
    WebInspector.View.call(this);
    this.database = database;
    this.tableName = tableName;
    this.element.addStyleClass("storage-view");
    this.element.addStyleClass("table");
    this.refreshButton = new WebInspector.StatusBarButton(WebInspector.UIString("Refresh"), "refresh-storage-status-bar-item");
    this.refreshButton.addEventListener("click", this._refreshButtonClicked.bind(this), false);
  };
  WebInspector.DatabaseTableView.prototype = {
    show: function(parentElement) {
      WebInspector.View.prototype.show.call(this, parentElement);
      this.update();
    },
    get statusBarItems() {
      return [this.refreshButton.element];
    },
    update: function() {
      this.database.executeSql("SELECT * FROM " + this.tableName, this._queryFinished.bind(this), this._queryError.bind(this));
    },
    _queryFinished: function(columnNames, values) {
      this.element.removeChildren();
      var dataGrid = WebInspector.panels.resources.dataGridForResult(columnNames, values);
      if (!dataGrid) {
        var emptyMsgElement = document.createElement("div");
        emptyMsgElement.className = "storage-empty-view";
        emptyMsgElement.textContent = WebInspector.UIString("The “%s”\ntable is empty.", this.tableName);
        this.element.appendChild(emptyMsgElement);
        return;
      }
      this.element.appendChild(dataGrid.element);
      dataGrid.autoSizeColumns(5);
    },
    _queryError: function(error) {
      this.element.removeChildren();
      var errorMsgElement = document.createElement("div");
      errorMsgElement.className = "storage-table-error";
      errorMsgElement.textContent = WebInspector.UIString("An error occurred trying to\nread the “%s” table.", this.tableName);
      this.element.appendChild(errorMsgElement);
    },
    _refreshButtonClicked: function(event) {
      this.update();
    }
  };
  WebInspector.DatabaseTableView.prototype.__proto__ = WebInspector.View.prototype;
  return {};
});
System.get("../../../../../node_modules/weinre/web/client/DatabaseTableView.js" + '');
